{{ define "main" }}
<div class="landing">

  <!-- Hero -->
  <section class="landing-hero">
    <h1>F*ck your bank.<br>Use cash!</h1>
    <p class="landing-subtitle">Kontana is a free, on-device cash tracker. No bank linking, no data brokerage â€” just a simple way to spend less, save more, and rely less on institutions you don't trust.</p>
    <ul class="landing-bullets">
      <li>On-device storage only</li>
      <li>No bank accounts required</li>
      <li>Free at launch</li>
    </ul>
    <a href="#waitlist" class="landing-btn">Join the waitlist</a>
  </section>

  <div class="landing-divider">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>

  <!-- Features -->
  <section class="landing-section">
    <h2>Why Kontana?</h2>
    <div class="landing-grid landing-grid--3">
      <div class="landing-card">
        <h3>ðŸ’µ Cash-only tracking</h3>
        <p>Built for people who use cash. No bank linking, no account aggregation.</p>
      </div>
      <div class="landing-card">
        <h3>ðŸ”’ On-device storage</h3>
        <p>Your data stays on your phone. No cloud sync, no analytics, no third-party access.</p>
      </div>
      <div class="landing-card">
        <h3>ðŸ“¤ Export when you choose</h3>
        <p>Optional exports so you stay in control of what leaves your device.</p>
      </div>
    </div>
  </section>

  <div class="landing-divider">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>

  <!-- How it works -->
  <section class="landing-section">
    <h2>How it works</h2>
    <p class="landing-section-sub">Three steps. No linking. No syncing your identity to your spending.</p>
    <div class="landing-grid landing-grid--3">
      <div class="landing-card">
        <h3>1. Log it</h3>
        <p>When cash leaves your wallet, record it in seconds.</p>
      </div>
      <div class="landing-card">
        <h3>2. Review</h3>
        <p>See trends and categories that actually change your habits.</p>
      </div>
      <div class="landing-card">
        <h3>3. Save</h3>
        <p>Use cash intentionally and watch your "small spends" shrink.</p>
      </div>
    </div>
  </section>

  <div class="landing-divider">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>

  <!-- Privacy -->
  <section class="landing-section">
    <h2>Privacy-first by design</h2>
    <p class="landing-section-sub">Cash is private. Your tracker should be too.</p>
    <div class="landing-grid landing-grid--3">
      <div class="landing-card">
        <h3>No bank accounts</h3>
        <p>Kontana doesn't connect to banks. That's the point.</p>
      </div>
      <div class="landing-card">
        <h3>On-device storage</h3>
        <p>Your data lives on your phone, not in a data warehouse.</p>
      </div>
      <div class="landing-card">
        <h3>You choose what to share</h3>
        <p>Export only when you want. No forced sync, no defaults that leak.</p>
      </div>
    </div>
  </section>

  <div class="landing-divider">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>

  <!-- Pricing -->
  <section class="landing-section">
    <h2>Free</h2>
    <p class="landing-section-sub">Kontana is a free, device-based app. Join the waitlist to be notified at launch.</p>
    <div class="landing-grid landing-grid--3">
      <div class="landing-card">
        <h3>Free at launch</h3>
        <div class="landing-price">$0</div>
        <ul class="landing-features">
          <li>âœ“ On-device cash log</li>
          <li>âœ“ Categories and notes</li>
          <li>âœ“ Offline-first</li>
          <li>âœ“ Optional exports</li>
        </ul>
        <a href="#waitlist" class="landing-btn landing-btn--outline">Join waitlist</a>
      </div>
      <div class="landing-card landing-card--featured">
        <span class="landing-badge">Privacy-first</span>
        <h3>No bank linking</h3>
        <div class="landing-price">Cash-only</div>
        <ul class="landing-features">
          <li>âœ“ Rely less on institutions</li>
          <li>âœ“ Reduce digital footprint</li>
          <li>âœ“ Build better spending habits</li>
          <li>âœ“ Simple, calm UI</li>
        </ul>
        <a href="#waitlist" class="landing-btn">Join waitlist</a>
      </div>
      <div class="landing-card">
        <h3>Community-driven</h3>
        <div class="landing-price">Open</div>
        <ul class="landing-features">
          <li>âœ“ Built with privacy in mind</li>
          <li>âœ“ Feedback shapes the roadmap</li>
          <li>âœ“ Early access for contributors</li>
          <li>âœ“ Transparent development</li>
        </ul>
        <a href="#waitlist" class="landing-btn landing-btn--outline">Join waitlist</a>
      </div>
    </div>
  </section>

  <div class="landing-divider">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>

  <!-- FAQ -->
  <section class="landing-section">
    <h2>FAQ</h2>
    <p class="landing-section-sub">Questions we get from privacy-first cash users.</p>
    <div class="landing-faq">
      <details class="landing-faq-item">
        <summary>Is Kontana really free?</summary>
        <div class="landing-faq-body">Yes. Free at launch, no hidden fees, no premium tier planned.</div>
      </details>
      <details class="landing-faq-item">
        <summary>Does it connect to my bank?</summary>
        <div class="landing-faq-body">No. Kontana is cash-only by design. No bank linking, no account aggregation.</div>
      </details>
      <details class="landing-faq-item">
        <summary>Where is my data stored?</summary>
        <div class="landing-faq-body">On your device only. Nothing leaves your phone unless you explicitly export it.</div>
      </details>
      <details class="landing-faq-item">
        <summary>Can I use it offline?</summary>
        <div class="landing-faq-body">Yes. Kontana is offline-first. Cash doesn't need Wi-Fi and neither does your tracker.</div>
      </details>
      <details class="landing-faq-item">
        <summary>How do I get notified at launch?</summary>
        <div class="landing-faq-body">Join the waitlist below. Email only. No tracking. Unsubscribe anytime.</div>
      </details>
    </div>
  </section>

  <div class="landing-divider">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>

  <!-- CTA / Waitlist -->
  <section id="waitlist" class="landing-section landing-cta">
    <h2>Get notified when Kontana launches</h2>
    <p class="landing-section-sub">Want a free, on-device cash tracker that helps you rely less on banks? Join the waitlist and we'll email you when it's ready.</p>
    <form id="waitlist-form" class="landing-form">
      <input type="email" name="email" placeholder="your@email.com" required />
      <div class="cf-turnstile" data-sitekey="0x4AAAAAACXPTpqdso7QmAhX"></div>
      <button type="submit" class="landing-btn">Join waitlist</button>
      <p class="landing-form-note">Email only. No tracking. Unsubscribe anytime.</p>
    </form>
    <div id="waitlist-msg"></div>
  </section>

</div>

<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
<script>
  document.getElementById('waitlist-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    var form = e.target;
    var msg = document.getElementById('waitlist-msg');
    var email = form.querySelector('input[name="email"]').value;
    var tokenInput = document.querySelector('input[name="cf-turnstile-response"]');
    var turnstileToken = tokenInput ? tokenInput.value : '';
    msg.textContent = '';
    var res = await fetch('/api/waitlist', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email: email, turnstileToken: turnstileToken }),
    });
    var result = await res.json().catch(function() { return { ok: false }; });
    if (result.ok) {
      msg.innerHTML = '<p class="landing-msg landing-msg--ok">OK: You\'re on the list.</p>';
      form.style.display = 'none';
    } else {
      var message = 'ERR: Something went wrong. Please try again.';
      if (res.status === 400) message = 'ERR: Please enter a valid email.';
      if (res.status === 403) message = 'ERR: Captcha verification failed.';
      msg.innerHTML = '<p class="landing-msg landing-msg--err">' + message + '</p>';
    }
  });
</script>
{{ end }}
